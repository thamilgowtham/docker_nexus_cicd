pipeline{
    agent any
    stages{
      stage('Sonar Quality Check') {
           steps{
              script{
                 withSonarQubeEnv(credentialsId: 'sonar-token') {
                 sh 'mvn clean install package sonar:sonar'
                 args '-u root'
                 }
              }
           }
        }
        stage('UPLOAD ARTIFACT') {
                steps {
                    nexusArtifactUploader(
                        nexusVersion: 'nexus3',
                        protocol: 'http',
                        nexusUrl: '54.213.195.214:8081',
                        groupId: 'com.javatechie',
                        version: '3.58.1-02',
                        repository: 'java-app',
                        credentialsId: 'nexus_login',
                        artifacts: [
                            [artifactId: 'devops-integration' ,
                            classifier: '',
                            file: 'target/devops-integration.jar',
                            type: 'jar']
                        ]
                    )
               }
           }
       } 
    }
